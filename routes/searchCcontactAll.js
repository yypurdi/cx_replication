/*
 * script route generated by KOMA
 * @author : Yan Yan Purdiansah
 */    
var express = require('express');
var router = express.Router();
var dateFormat = require('dateformat');    
var database = require('./dao');
var dao = new database.Dao();    
var sessionChecker = require('./security');
var appresource = {
    Title:'CcontactAllSearch',
    Heading:'CcontactAll',
    CustomerId:{label :'CustomerId'},
    Ccseq:{label :'Ccseq'},
    Cctitle:{label :'Cctitle'},
    Ccname:{label :'Ccname'},
    Ccfname:{label :'Ccfname'},
    Cclname:{label :'Cclname'},
    Ccstreet:{label :'Ccstreet'},
    Ccstreetno:{label :'Ccstreetno'},
    Cclnamemc:{label :'Cclnamemc'},
    Ccaddr1:{label :'Ccaddr1'},
    Ccaddr2:{label :'Ccaddr2'},
    Ccaddr3:{label :'Ccaddr3'},
    Cccity:{label :'Cccity'},
    Cczip:{label :'Cczip'},
    Cctn:{label :'Cctn'},
    Cctn2:{label :'Cctn2'},
    Ccfax:{label :'Ccfax'},
    Ccline1:{label :'Ccline1'},
    Ccline2:{label :'Ccline2'},
    Ccline3:{label :'Ccline3'},
    Ccline4:{label :'Ccline4'},
    Ccline5:{label :'Ccline5'},
    Ccline6:{label :'Ccline6'},
    CctnArea:{label :'CctnArea'},
    Cctn2Area:{label :'Cctn2Area'},
    CcfaxArea:{label :'CcfaxArea'},
    Ccjobdesc:{label :'Ccjobdesc'},
    Ccdeftrk:{label :'Ccdeftrk'},
    Ccuser:{label :'Ccuser'},
    Ccbill:{label :'Ccbill'},
    Ccbilldetails:{label :'Ccbilldetails'},
    Cccontract:{label :'Cccontract'},
    Ccship:{label :'Ccship'},
    Ccmagazine:{label :'Ccmagazine'},
    Ccdirectory:{label :'Ccdirectory'},
    Ccforward:{label :'Ccforward'},
    Ccurgent:{label :'Ccurgent'},
    Country:{label :'Country'},
    Cclanguage:{label :'Cclanguage'},
    Ccadditional:{label :'Ccadditional'},
    SortCriteria:{label :'SortCriteria'},
    Ccentdate:{label :'Ccentdate'},
    Ccmoddate:{label :'Ccmoddate'},
    Ccmod:{label :'Ccmod'},
    Cccounty:{label :'Cccounty'},
    Ccstate:{label :'Ccstate'},
    Ccvaliddate:{label :'Ccvaliddate'},
    CcbillPrevious:{label :'CcbillPrevious'},
    WelcomeCrit:{label :'WelcomeCrit'},
    Ccmname:{label :'Ccmname'},
    Ccemail:{label :'Ccemail'},
    Ccaddryears:{label :'Ccaddryears'},
    Ccsmsno:{label :'Ccsmsno'},
    Ccbilltemp:{label :'Ccbilltemp'},
    Userlastmod:{label :'Userlastmod'},
    Ccvalidation:{label :'Ccvalidation'},
    CcuserInst:{label :'CcuserInst'},
    Cclocation1:{label :'Cclocation1'},
    Cclocation2:{label :'Cclocation2'},
    Ccremark:{label :'Ccremark'},
    RecVersion:{label :'RecVersion'},
    MaritalStatus:{label :'MaritalStatus'},
    Csnationality:{label :'Csnationality'},
    Cssocialsecno:{label :'Cssocialsecno'},
    Csdrivelicence:{label :'Csdrivelicence'},
    Csemployer:{label :'Csemployer'},
    Employee:{label :'Employee'},
    CompanyType:{label :'CompanyType'},
    IdType:{label :'IdType'},
    Passportno:{label :'Passportno'},
    Birthdate:{label :'Birthdate'},
    Cscompregno:{label :'Cscompregno'},
    Cscomptaxno:{label :'Cscomptaxno'},
    Cscusttype:{label :'Cscusttype'},
    Ccsex:{label :'Ccsex'},
    CcontactAll:{Heading:'CcontactAll',
        CustomerId:{header:'CustomerId'},
        Ccseq:{header:'Ccseq'},
        Cctitle:{header:'Cctitle'},
        Ccname:{header:'Ccname'},
        Ccfname:{header:'Ccfname'},
        Cclname:{header:'Cclname'},
        Ccstreet:{header:'Ccstreet'},
        Ccstreetno:{header:'Ccstreetno'},
        Cclnamemc:{header:'Cclnamemc'},
        Ccaddr1:{header:'Ccaddr1'},
        Ccaddr2:{header:'Ccaddr2'},
        Ccaddr3:{header:'Ccaddr3'},
        Cccity:{header:'Cccity'},
        Cczip:{header:'Cczip'},
        Cctn:{header:'Cctn'},
        Cctn2:{header:'Cctn2'},
        Ccfax:{header:'Ccfax'},
        Ccline1:{header:'Ccline1'},
        Ccline2:{header:'Ccline2'},
        Ccline3:{header:'Ccline3'},
        Ccline4:{header:'Ccline4'},
        Ccline5:{header:'Ccline5'},
        Ccline6:{header:'Ccline6'},
        CctnArea:{header:'CctnArea'},
        Cctn2Area:{header:'Cctn2Area'},
        CcfaxArea:{header:'CcfaxArea'},
        Ccjobdesc:{header:'Ccjobdesc'},
        Ccdeftrk:{header:'Ccdeftrk'},
        Ccuser:{header:'Ccuser'},
        Ccbill:{header:'Ccbill'},
        Ccbilldetails:{header:'Ccbilldetails'},
        Cccontract:{header:'Cccontract'},
        Ccship:{header:'Ccship'},
        Ccmagazine:{header:'Ccmagazine'},
        Ccdirectory:{header:'Ccdirectory'},
        Ccforward:{header:'Ccforward'},
        Ccurgent:{header:'Ccurgent'},
        Country:{header:'Country'},
        Cclanguage:{header:'Cclanguage'},
        Ccadditional:{header:'Ccadditional'},
        SortCriteria:{header:'SortCriteria'},
        Ccentdate:{header:'Ccentdate'},
        Ccmoddate:{header:'Ccmoddate'},
        Ccmod:{header:'Ccmod'},
        Cccounty:{header:'Cccounty'},
        Ccstate:{header:'Ccstate'},
        Ccvaliddate:{header:'Ccvaliddate'},
        CcbillPrevious:{header:'CcbillPrevious'},
        WelcomeCrit:{header:'WelcomeCrit'},
        Ccmname:{header:'Ccmname'},
        Ccemail:{header:'Ccemail'},
        Ccaddryears:{header:'Ccaddryears'},
        Ccsmsno:{header:'Ccsmsno'},
        Ccbilltemp:{header:'Ccbilltemp'},
        Userlastmod:{header:'Userlastmod'},
        Ccvalidation:{header:'Ccvalidation'},
        CcuserInst:{header:'CcuserInst'},
        Cclocation1:{header:'Cclocation1'},
        Cclocation2:{header:'Cclocation2'},
        Ccremark:{header:'Ccremark'},
        RecVersion:{header:'RecVersion'},
        MaritalStatus:{header:'MaritalStatus'},
        Csnationality:{header:'Csnationality'},
        Cssocialsecno:{header:'Cssocialsecno'},
        Csdrivelicence:{header:'Csdrivelicence'},
        Csemployer:{header:'Csemployer'},
        Employee:{header:'Employee'},
        CompanyType:{header:'CompanyType'},
        IdType:{header:'IdType'},
        Passportno:{header:'Passportno'},
        Birthdate:{header:'Birthdate'},
        Cscompregno:{header:'Cscompregno'},
        Cscomptaxno:{header:'Cscomptaxno'},
        Cscusttype:{header:'Cscusttype'},
        Ccsex:{header:'Ccsex'},
        },
    }

router.get('/', sessionChecker, function(req, res, next) {
    var jsonObj = req.query;
    if(jsonObj.rowid===undefined) jsonObj.rowid = 0;
    req.session.previouspath = 'searchCcontactAll?'+req._parsedUrl.query;
    dao.searchCcontactAll(jsonObj,function(err,rows) {
        parameter = {
            session: req.session,
            cookies: req.cookies,
            resource: appresource,
            dateFormat: dateFormat,
            records: rows,
        }
        res.render('CcontactAllSearchPage',parameter);
        console.log(parameter);        
    })
});

module.exports = router;
