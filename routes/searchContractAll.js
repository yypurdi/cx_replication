/*
 * script route generated by KOMA
 * @author : Yan Yan Purdiansah
 */    
var express = require('express');
var router = express.Router();
var dateFormat = require('dateformat');    
var database = require('./dao');
var dao = new database.Dao();    
var sessionChecker = require('./security');
var appresource = {
    Title:'ContractAllSearch',
    Heading:'ContractAll',
    CoId:{label :'CoId'},
    CustomerId:{label :'CustomerId'},
    Type:{label :'Type'},
    Plcode:{label :'Plcode'},
    Sccode:{label :'Sccode'},
    SubmId:{label :'SubmId'},
    CoSigned:{label :'CoSigned'},
    CoEquType:{label :'CoEquType'},
    CoRepBill:{label :'CoRepBill'},
    CoRep:{label :'CoRep'},
    CoRepBillIdno:{label :'CoRepBillIdno'},
    CoRepIdno:{label :'CoRepIdno'},
    CoInstalled:{label :'CoInstalled'},
    CoArchive:{label :'CoArchive'},
    CoDirEntry:{label :'CoDirEntry'},
    CoOperatorDir:{label :'CoOperatorDir'},
    CoPstnDir:{label :'CoPstnDir'},
    CoAssServ:{label :'CoAssServ'},
    CoAssEqu:{label :'CoAssEqu'},
    CoCrdCheck:{label :'CoCrdCheck'},
    CoCrdChkEnd:{label :'CoCrdChkEnd'},
    CoCrdChkStart:{label :'CoCrdChkStart'},
    CoCrdClicks:{label :'CoCrdClicks'},
    CoCrdClicksDay:{label :'CoCrdClicksDay'},
    CoCrdDays:{label :'CoCrdDays'},
    CoComment:{label :'CoComment'},
    CoReserved:{label :'CoReserved'},
    CoExpirDate:{label :'CoExpirDate'},
    CoActivated:{label :'CoActivated'},
    CoEntdate:{label :'CoEntdate'},
    CoModdate:{label :'CoModdate'},
    CoUserlastmod:{label :'CoUserlastmod'},
    Tmcode:{label :'Tmcode'},
    TmcodeDate:{label :'TmcodeDate'},
    CoCrdDTr1:{label :'CoCrdDTr1'},
    CoCrdDTr2:{label :'CoCrdDTr2'},
    CoCrdDTr3:{label :'CoCrdDTr3'},
    CoCrdPTr1:{label :'CoCrdPTr1'},
    CoCrdPTr2:{label :'CoCrdPTr2'},
    CoCrdPTr3:{label :'CoCrdPTr3'},
    EccodeLdc:{label :'EccodeLdc'},
    PendingEccodeLdc:{label :'PendingEccodeLdc'},
    EccodeLec:{label :'EccodeLec'},
    PendingEccodeLec:{label :'PendingEccodeLec'},
    CoRequest:{label :'CoRequest'},
    DealerId:{label :'DealerId'},
    NotValid:{label :'NotValid'},
    Arpcode:{label :'Arpcode'},
    CoAddrOnIbill:{label :'CoAddrOnIbill'},
    CoCrdAmount:{label :'CoCrdAmount'},
    CoCrdAmountDay:{label :'CoCrdAmountDay'},
    ProductHistoryDate:{label :'ProductHistoryDate'},
    CoConfirm:{label :'CoConfirm'},
    CoExtCsuin:{label :'CoExtCsuin'},
    TrialEndDate:{label :'TrialEndDate'},
    CoIbCdrFlag:{label :'CoIbCdrFlag'},
    Currency:{label :'Currency'},
    RecVersion:{label :'RecVersion'},
    AnPackageId:{label :'AnPackageId'},
    CoRelType:{label :'CoRelType'},
    PendingTmcode:{label :'PendingTmcode'},
    ContractTemplate:{label :'ContractTemplate'},
    CoCode:{label :'CoCode'},
    BusinessUnitId:{label :'BusinessUnitId'},
    Description:{label :'Description'},
    AgreementType:{label :'AgreementType'},
    ExtProductId:{label :'ExtProductId'},
    RemotePlcode:{label :'RemotePlcode'},
    Eccode:{label :'Eccode'},
    HplmnBidGroupId:{label :'HplmnBidGroupId'},
    VplmnBidGroupId:{label :'VplmnBidGroupId'},
    HomePartyId:{label :'HomePartyId'},
    ContractTypeId:{label :'ContractTypeId'},
    TrialStartDate:{label :'TrialStartDate'},
    FohAggregationFlag:{label :'FohAggregationFlag'},
    GlAccPackId:{label :'GlAccPackId'},
    CdsBillMedium:{label :'CdsBillMedium'},
    CdsGeneration:{label :'CdsGeneration'},
    ChargePartNum:{label :'ChargePartNum'},
    ChStatus:{label :'ChStatus'},
    SvpFile:{label :'SvpFile'},
    MakeCallsDate:{label :'MakeCallsDate'},
    CoInprepayPending:{label :'CoInprepayPending'},
    CoInprepay:{label :'CoInprepay'},
    ChargePerAdjRef:{label :'ChargePerAdjRef'},
    NextCutoffDate:{label :'NextCutoffDate'},
    LastCutoffDate:{label :'LastCutoffDate'},
    LastChargeDate:{label :'LastChargeDate'},
    LastNoticeDate:{label :'LastNoticeDate'},
    NotBillMedium:{label :'NotBillMedium'},
    ChargeStartDate:{label :'ChargeStartDate'},
    EarliestEndDate:{label :'EarliestEndDate'},
    CommonRefDataInd:{label :'CommonRefDataInd'},
    ContractLanguage:{label :'ContractLanguage'},
    PendingLanguage:{label :'PendingLanguage'},
    RrCandidate:{label :'RrCandidate'},
    ChStatusValidfrom:{label :'ChStatusValidfrom'},
    ContractAll:{Heading:'ContractAll',
        CoId:{header:'CoId'},
        CustomerId:{header:'CustomerId'},
        Type:{header:'Type'},
        Plcode:{header:'Plcode'},
        Sccode:{header:'Sccode'},
        SubmId:{header:'SubmId'},
        CoSigned:{header:'CoSigned'},
        CoEquType:{header:'CoEquType'},
        CoRepBill:{header:'CoRepBill'},
        CoRep:{header:'CoRep'},
        CoRepBillIdno:{header:'CoRepBillIdno'},
        CoRepIdno:{header:'CoRepIdno'},
        CoInstalled:{header:'CoInstalled'},
        CoArchive:{header:'CoArchive'},
        CoDirEntry:{header:'CoDirEntry'},
        CoOperatorDir:{header:'CoOperatorDir'},
        CoPstnDir:{header:'CoPstnDir'},
        CoAssServ:{header:'CoAssServ'},
        CoAssEqu:{header:'CoAssEqu'},
        CoCrdCheck:{header:'CoCrdCheck'},
        CoCrdChkEnd:{header:'CoCrdChkEnd'},
        CoCrdChkStart:{header:'CoCrdChkStart'},
        CoCrdClicks:{header:'CoCrdClicks'},
        CoCrdClicksDay:{header:'CoCrdClicksDay'},
        CoCrdDays:{header:'CoCrdDays'},
        CoComment:{header:'CoComment'},
        CoReserved:{header:'CoReserved'},
        CoExpirDate:{header:'CoExpirDate'},
        CoActivated:{header:'CoActivated'},
        CoEntdate:{header:'CoEntdate'},
        CoModdate:{header:'CoModdate'},
        CoUserlastmod:{header:'CoUserlastmod'},
        Tmcode:{header:'Tmcode'},
        TmcodeDate:{header:'TmcodeDate'},
        CoCrdDTr1:{header:'CoCrdDTr1'},
        CoCrdDTr2:{header:'CoCrdDTr2'},
        CoCrdDTr3:{header:'CoCrdDTr3'},
        CoCrdPTr1:{header:'CoCrdPTr1'},
        CoCrdPTr2:{header:'CoCrdPTr2'},
        CoCrdPTr3:{header:'CoCrdPTr3'},
        EccodeLdc:{header:'EccodeLdc'},
        PendingEccodeLdc:{header:'PendingEccodeLdc'},
        EccodeLec:{header:'EccodeLec'},
        PendingEccodeLec:{header:'PendingEccodeLec'},
        CoRequest:{header:'CoRequest'},
        DealerId:{header:'DealerId'},
        NotValid:{header:'NotValid'},
        Arpcode:{header:'Arpcode'},
        CoAddrOnIbill:{header:'CoAddrOnIbill'},
        CoCrdAmount:{header:'CoCrdAmount'},
        CoCrdAmountDay:{header:'CoCrdAmountDay'},
        ProductHistoryDate:{header:'ProductHistoryDate'},
        CoConfirm:{header:'CoConfirm'},
        CoExtCsuin:{header:'CoExtCsuin'},
        TrialEndDate:{header:'TrialEndDate'},
        CoIbCdrFlag:{header:'CoIbCdrFlag'},
        Currency:{header:'Currency'},
        RecVersion:{header:'RecVersion'},
        AnPackageId:{header:'AnPackageId'},
        CoRelType:{header:'CoRelType'},
        PendingTmcode:{header:'PendingTmcode'},
        ContractTemplate:{header:'ContractTemplate'},
        CoCode:{header:'CoCode'},
        BusinessUnitId:{header:'BusinessUnitId'},
        Description:{header:'Description'},
        AgreementType:{header:'AgreementType'},
        ExtProductId:{header:'ExtProductId'},
        RemotePlcode:{header:'RemotePlcode'},
        Eccode:{header:'Eccode'},
        HplmnBidGroupId:{header:'HplmnBidGroupId'},
        VplmnBidGroupId:{header:'VplmnBidGroupId'},
        HomePartyId:{header:'HomePartyId'},
        ContractTypeId:{header:'ContractTypeId'},
        TrialStartDate:{header:'TrialStartDate'},
        FohAggregationFlag:{header:'FohAggregationFlag'},
        GlAccPackId:{header:'GlAccPackId'},
        CdsBillMedium:{header:'CdsBillMedium'},
        CdsGeneration:{header:'CdsGeneration'},
        ChargePartNum:{header:'ChargePartNum'},
        ChStatus:{header:'ChStatus'},
        SvpFile:{header:'SvpFile'},
        MakeCallsDate:{header:'MakeCallsDate'},
        CoInprepayPending:{header:'CoInprepayPending'},
        CoInprepay:{header:'CoInprepay'},
        ChargePerAdjRef:{header:'ChargePerAdjRef'},
        NextCutoffDate:{header:'NextCutoffDate'},
        LastCutoffDate:{header:'LastCutoffDate'},
        LastChargeDate:{header:'LastChargeDate'},
        LastNoticeDate:{header:'LastNoticeDate'},
        NotBillMedium:{header:'NotBillMedium'},
        ChargeStartDate:{header:'ChargeStartDate'},
        EarliestEndDate:{header:'EarliestEndDate'},
        CommonRefDataInd:{header:'CommonRefDataInd'},
        ContractLanguage:{header:'ContractLanguage'},
        PendingLanguage:{header:'PendingLanguage'},
        RrCandidate:{header:'RrCandidate'},
        ChStatusValidfrom:{header:'ChStatusValidfrom'},
        },
    }

router.get('/', sessionChecker, function(req, res, next) {
    var jsonObj = req.query;
    if(jsonObj.rowid===undefined) jsonObj.rowid = 0;
    req.session.previouspath = 'searchContractAll?'+req._parsedUrl.query;
    dao.searchContractAll(jsonObj,function(err,rows) {
        parameter = {
            session: req.session,
            cookies: req.cookies,
            resource: appresource,
            dateFormat: dateFormat,
            records: rows,
        }
        res.render('ContractAllSearchPage',parameter);
        console.log(parameter);        
    })
});

module.exports = router;
