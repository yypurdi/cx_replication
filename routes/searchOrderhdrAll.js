/*
 * script route generated by KOMA
 * @author : Yan Yan Purdiansah
 */    
var express = require('express');
var router = express.Router();
var dateFormat = require('dateformat');    
var database = require('./dao');
var dao = new database.Dao();    
var sessionChecker = require('./security');
var appresource = {
    Title:'OrderhdrAllSearch',
    Heading:'OrderhdrAll',
    Ohxact:{label :'Ohxact'},
    Ohstatus:{label :'Ohstatus'},
    Ohstatusflg:{label :'Ohstatusflg'},
    Ohentdate:{label :'Ohentdate'},
    Ohrefnum:{label :'Ohrefnum'},
    Ohtshdate:{label :'Ohtshdate'},
    Ohsls:{label :'Ohsls'},
    CustomerId:{label :'CustomerId'},
    Ohcseq:{label :'Ohcseq'},
    Ohsname:{label :'Ohsname'},
    Ohsaddr1:{label :'Ohsaddr1'},
    Ohsaddr2:{label :'Ohsaddr2'},
    Ohsaddr3:{label :'Ohsaddr3'},
    Ohscity:{label :'Ohscity'},
    Ohsst:{label :'Ohsst'},
    Ohszip:{label :'Ohszip'},
    Ohscountry:{label :'Ohscountry'},
    Ohscrc:{label :'Ohscrc'},
    Ohattn:{label :'Ohattn'},
    Ohtrucker:{label :'Ohtrucker'},
    Ohponum:{label :'Ohponum'},
    Ohrelease:{label :'Ohrelease'},
    Ohpsno:{label :'Ohpsno'},
    Ohfrtterms:{label :'Ohfrtterms'},
    Ohordtyp:{label :'Ohordtyp'},
    Ohcandate:{label :'Ohcandate'},
    Ohassocxact:{label :'Ohassocxact'},
    Ohprt1:{label :'Ohprt1'},
    Ohprt2:{label :'Ohprt2'},
    Ohprt3:{label :'Ohprt3'},
    Ohuserid:{label :'Ohuserid'},
    Ohrefdate:{label :'Ohrefdate'},
    Ohshpdate:{label :'Ohshpdate'},
    Ohduedate:{label :'Ohduedate'},
    Ohipp:{label :'Ohipp'},
    Ohilpp:{label :'Ohilpp'},
    Ohpostgl:{label :'Ohpostgl'},
    Ohpostar:{label :'Ohpostar'},
    OharcustomerId:{label :'OharcustomerId'},
    Ohglar:{label :'Ohglar'},
    Ohdisdate:{label :'Ohdisdate'},
    DdebitFlag:{label :'DdebitFlag'},
    Oharflg:{label :'Oharflg'},
    Ohinvtype:{label :'Ohinvtype'},
    Ohfulfildate:{label :'Ohfulfildate'},
    OhpaymentId:{label :'OhpaymentId'},
    Ohpostfibu:{label :'Ohpostfibu'},
    Ohreason:{label :'Ohreason'},
    OhrsId:{label :'OhrsId'},
    Ohddhflag:{label :'Ohddhflag'},
    Ohddhdate:{label :'Ohddhdate'},
    Ohfct:{label :'Ohfct'},
    Ohlct:{label :'Ohlct'},
    Ohmod:{label :'Ohmod'},
    Ohxrate:{label :'Ohxrate'},
    Oheccode:{label :'Oheccode'},
    Ohecname:{label :'Ohecname'},
    Ohglexact:{label :'Ohglexact'},
    Ohdunstep:{label :'Ohdunstep'},
    Ohflfct:{label :'Ohflfct'},
    Ohfllct:{label :'Ohfllct'},
    CoId:{label :'CoId'},
    Complaint:{label :'Complaint'},
    ComplaintDate:{label :'ComplaintDate'},
    RtxStatus:{label :'RtxStatus'},
    Ohbillseqno:{label :'Ohbillseqno'},
    Ohcancelflag:{label :'Ohcancelflag'},
    ConvdateExchange:{label :'ConvdateExchange'},
    OhglexactTax:{label :'OhglexactTax'},
    GlacodeDiff:{label :'GlacodeDiff'},
    JobcostIdDiff:{label :'JobcostIdDiff'},
    TaxRoundingFlag:{label :'TaxRoundingFlag'},
    GlCurrency:{label :'GlCurrency'},
    DocumentCurrency:{label :'DocumentCurrency'},
    DocumentConvratetypeId:{label :'DocumentConvratetypeId'},
    SecondaryCurrency:{label :'SecondaryCurrency'},
    SecondaryConvratetypeId:{label :'SecondaryConvratetypeId'},
    OhinvamtGl:{label :'OhinvamtGl'},
    OhopnamtGl:{label :'OhopnamtGl'},
    OhdisamtGl:{label :'OhdisamtGl'},
    OhdistakamtGl:{label :'OhdistakamtGl'},
    OhtaxamtGl:{label :'OhtaxamtGl'},
    TaxamtDiffGl:{label :'TaxamtDiffGl'},
    OhinvamtDoc:{label :'OhinvamtDoc'},
    OhopnamtDoc:{label :'OhopnamtDoc'},
    OhdisamtDoc:{label :'OhdisamtDoc'},
    OhdistakamtDoc:{label :'OhdistakamtDoc'},
    OhtaxamtDoc:{label :'OhtaxamtDoc'},
    GlConvratetypeId:{label :'GlConvratetypeId'},
    FeeBalance:{label :'FeeBalance'},
    FeeBalanceGross:{label :'FeeBalanceGross'},
    Currency:{label :'Currency'},
    Ohcostcent:{label :'Ohcostcent'},
    RecVersion:{label :'RecVersion'},
    OhinvamtSecdoc:{label :'OhinvamtSecdoc'},
    TaxamtDiffSecdoc:{label :'TaxamtDiffSecdoc'},
    Paymentfailed:{label :'Paymentfailed'},
    BillingAccountId:{label :'BillingAccountId'},
    BalancePageEventDate:{label :'BalancePageEventDate'},
    PrepaidBalanceChangeDoc:{label :'PrepaidBalanceChangeDoc'},
    PrepaidBalanceChangeGl:{label :'PrepaidBalanceChangeGl'},
    PrepaidGlacode:{label :'PrepaidGlacode'},
    PrepaidTaxamtDiffGl:{label :'PrepaidTaxamtDiffGl'},
    PrepaidTaxDiffGlacode:{label :'PrepaidTaxDiffGlacode'},
    PaymentConditionId:{label :'PaymentConditionId'},
    Ohdocstatus:{label :'Ohdocstatus'},
    Ohextrefdate:{label :'Ohextrefdate'},
    Ohextrefnum:{label :'Ohextrefnum'},
    Ohcmident:{label :'Ohcmident'},
    Ohremark:{label :'Ohremark'},
    OhdiscbaseDoc:{label :'OhdiscbaseDoc'},
    Ohproppaycurr:{label :'Ohproppaycurr'},
    Ohproppaydate:{label :'Ohproppaydate'},
    OhprocessType:{label :'OhprocessType'},
    OhprocessDate:{label :'OhprocessDate'},
    BusinessUnitId:{label :'BusinessUnitId'},
    ProposedPaymentMethod:{label :'ProposedPaymentMethod'},
    ReasonId:{label :'ReasonId'},
    IncomingDocPricingType:{label :'IncomingDocPricingType'},
    IncomingDocTaxPerItem:{label :'IncomingDocTaxPerItem'},
    PaymentProposalId:{label :'PaymentProposalId'},
    OrderhdrAll:{Heading:'OrderhdrAll',
        Ohxact:{header:'Ohxact'},
        Ohstatus:{header:'Ohstatus'},
        Ohstatusflg:{header:'Ohstatusflg'},
        Ohentdate:{header:'Ohentdate'},
        Ohrefnum:{header:'Ohrefnum'},
        Ohtshdate:{header:'Ohtshdate'},
        Ohsls:{header:'Ohsls'},
        CustomerId:{header:'CustomerId'},
        Ohcseq:{header:'Ohcseq'},
        Ohsname:{header:'Ohsname'},
        Ohsaddr1:{header:'Ohsaddr1'},
        Ohsaddr2:{header:'Ohsaddr2'},
        Ohsaddr3:{header:'Ohsaddr3'},
        Ohscity:{header:'Ohscity'},
        Ohsst:{header:'Ohsst'},
        Ohszip:{header:'Ohszip'},
        Ohscountry:{header:'Ohscountry'},
        Ohscrc:{header:'Ohscrc'},
        Ohattn:{header:'Ohattn'},
        Ohtrucker:{header:'Ohtrucker'},
        Ohponum:{header:'Ohponum'},
        Ohrelease:{header:'Ohrelease'},
        Ohpsno:{header:'Ohpsno'},
        Ohfrtterms:{header:'Ohfrtterms'},
        Ohordtyp:{header:'Ohordtyp'},
        Ohcandate:{header:'Ohcandate'},
        Ohassocxact:{header:'Ohassocxact'},
        Ohprt1:{header:'Ohprt1'},
        Ohprt2:{header:'Ohprt2'},
        Ohprt3:{header:'Ohprt3'},
        Ohuserid:{header:'Ohuserid'},
        Ohrefdate:{header:'Ohrefdate'},
        Ohshpdate:{header:'Ohshpdate'},
        Ohduedate:{header:'Ohduedate'},
        Ohipp:{header:'Ohipp'},
        Ohilpp:{header:'Ohilpp'},
        Ohpostgl:{header:'Ohpostgl'},
        Ohpostar:{header:'Ohpostar'},
        OharcustomerId:{header:'OharcustomerId'},
        Ohglar:{header:'Ohglar'},
        Ohdisdate:{header:'Ohdisdate'},
        DdebitFlag:{header:'DdebitFlag'},
        Oharflg:{header:'Oharflg'},
        Ohinvtype:{header:'Ohinvtype'},
        Ohfulfildate:{header:'Ohfulfildate'},
        OhpaymentId:{header:'OhpaymentId'},
        Ohpostfibu:{header:'Ohpostfibu'},
        Ohreason:{header:'Ohreason'},
        OhrsId:{header:'OhrsId'},
        Ohddhflag:{header:'Ohddhflag'},
        Ohddhdate:{header:'Ohddhdate'},
        Ohfct:{header:'Ohfct'},
        Ohlct:{header:'Ohlct'},
        Ohmod:{header:'Ohmod'},
        Ohxrate:{header:'Ohxrate'},
        Oheccode:{header:'Oheccode'},
        Ohecname:{header:'Ohecname'},
        Ohglexact:{header:'Ohglexact'},
        Ohdunstep:{header:'Ohdunstep'},
        Ohflfct:{header:'Ohflfct'},
        Ohfllct:{header:'Ohfllct'},
        CoId:{header:'CoId'},
        Complaint:{header:'Complaint'},
        ComplaintDate:{header:'ComplaintDate'},
        RtxStatus:{header:'RtxStatus'},
        Ohbillseqno:{header:'Ohbillseqno'},
        Ohcancelflag:{header:'Ohcancelflag'},
        ConvdateExchange:{header:'ConvdateExchange'},
        OhglexactTax:{header:'OhglexactTax'},
        GlacodeDiff:{header:'GlacodeDiff'},
        JobcostIdDiff:{header:'JobcostIdDiff'},
        TaxRoundingFlag:{header:'TaxRoundingFlag'},
        GlCurrency:{header:'GlCurrency'},
        DocumentCurrency:{header:'DocumentCurrency'},
        DocumentConvratetypeId:{header:'DocumentConvratetypeId'},
        SecondaryCurrency:{header:'SecondaryCurrency'},
        SecondaryConvratetypeId:{header:'SecondaryConvratetypeId'},
        OhinvamtGl:{header:'OhinvamtGl'},
        OhopnamtGl:{header:'OhopnamtGl'},
        OhdisamtGl:{header:'OhdisamtGl'},
        OhdistakamtGl:{header:'OhdistakamtGl'},
        OhtaxamtGl:{header:'OhtaxamtGl'},
        TaxamtDiffGl:{header:'TaxamtDiffGl'},
        OhinvamtDoc:{header:'OhinvamtDoc'},
        OhopnamtDoc:{header:'OhopnamtDoc'},
        OhdisamtDoc:{header:'OhdisamtDoc'},
        OhdistakamtDoc:{header:'OhdistakamtDoc'},
        OhtaxamtDoc:{header:'OhtaxamtDoc'},
        GlConvratetypeId:{header:'GlConvratetypeId'},
        FeeBalance:{header:'FeeBalance'},
        FeeBalanceGross:{header:'FeeBalanceGross'},
        Currency:{header:'Currency'},
        Ohcostcent:{header:'Ohcostcent'},
        RecVersion:{header:'RecVersion'},
        OhinvamtSecdoc:{header:'OhinvamtSecdoc'},
        TaxamtDiffSecdoc:{header:'TaxamtDiffSecdoc'},
        Paymentfailed:{header:'Paymentfailed'},
        BillingAccountId:{header:'BillingAccountId'},
        BalancePageEventDate:{header:'BalancePageEventDate'},
        PrepaidBalanceChangeDoc:{header:'PrepaidBalanceChangeDoc'},
        PrepaidBalanceChangeGl:{header:'PrepaidBalanceChangeGl'},
        PrepaidGlacode:{header:'PrepaidGlacode'},
        PrepaidTaxamtDiffGl:{header:'PrepaidTaxamtDiffGl'},
        PrepaidTaxDiffGlacode:{header:'PrepaidTaxDiffGlacode'},
        PaymentConditionId:{header:'PaymentConditionId'},
        Ohdocstatus:{header:'Ohdocstatus'},
        Ohextrefdate:{header:'Ohextrefdate'},
        Ohextrefnum:{header:'Ohextrefnum'},
        Ohcmident:{header:'Ohcmident'},
        Ohremark:{header:'Ohremark'},
        OhdiscbaseDoc:{header:'OhdiscbaseDoc'},
        Ohproppaycurr:{header:'Ohproppaycurr'},
        Ohproppaydate:{header:'Ohproppaydate'},
        OhprocessType:{header:'OhprocessType'},
        OhprocessDate:{header:'OhprocessDate'},
        BusinessUnitId:{header:'BusinessUnitId'},
        ProposedPaymentMethod:{header:'ProposedPaymentMethod'},
        ReasonId:{header:'ReasonId'},
        IncomingDocPricingType:{header:'IncomingDocPricingType'},
        IncomingDocTaxPerItem:{header:'IncomingDocTaxPerItem'},
        PaymentProposalId:{header:'PaymentProposalId'},
        },
    }

router.get('/', sessionChecker, function(req, res, next) {
    var jsonObj = req.query;
    if(jsonObj.rowid===undefined) jsonObj.rowid = 0;
    req.session.previouspath = 'searchOrderhdrAll?'+req._parsedUrl.query;
    dao.searchOrderhdrAll(jsonObj,function(err,rows) {
        parameter = {
            session: req.session,
            cookies: req.cookies,
            resource: appresource,
            dateFormat: dateFormat,
            records: rows,
        }
        res.render('OrderhdrAllSearchPage',parameter);
        console.log(parameter);        
    })
});

module.exports = router;
